<!-- m_matschiner Thu Jan 5 23:30:10 CET 2017-->

#### Summary

The code in directory `scripts` performs a reanalysis of the SNP data generated by Winston et al. (2016), using divergence-time estimation with SNAPP.

#### How to run

To conduct this reanalysis, navigate into the 'scripts' directory and run `bash run_all.sh`. Note however, that this script will quit after generating XML format input files and preparing three replicate analysis directories for SNAPP (in `analysis/snapp/replicates`). SNAPP analyses will need to be conducted separately using the generated XML input files. How to run these analyses most efficiently will depend on the available computer resources, but the `start.slurm` and `resume.slurm` scripts in the three replicate analysis directories may be helpful as templates to execute SNAPP. A single analysis will sample 200000 MCMC iterations, but at least 400000 iterations per replicate will be required for convergence, thus each analysis will need to be resumed at least once. For each replicate, around 2-4 weeks of run time will be required.

Once the SNAPP analyses have finished, the remaining steps listed in file `run_all.sh` can be executed by copy-pasting the commands one by one to the command line. These steps should require only a few seconds.

#### Results

Final results can then be found in directory `analysis/snapp/combined`. The MCC species tree will be in file `eciton.tre` and a posterior sample of 6000 trees will be in file `eciton.trees`. The same number of sampled parameter estimates will be in file `eciton.log`, which can be opened for a visual assessment of convergence in the software Tracer ([http://tree.bio.ed.ac.uk/software/tracer/](http://tree.bio.ed.ac.uk/software/tracer/)).

#### Requirements

The following software must be installed in order to run all scripts of directory `scripts`:

* `python3` (version 3.0 or later; [https://www.python.org/downloads/](https://www.python.org/downloads/))
* `ruby` (version 2.0 or later; [https://www.ruby-lang.org/en/](https://www.ruby-lang.org/en/))
* `java` (Java SE Development Kit 8 or later; [http://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html))
*  `wget`